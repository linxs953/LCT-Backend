# 数据库设计



### 任务信息表
```typescript
class  lct_task_info {
    taskID string
    taskName string
    isEnable int
    envID string
    isAutoRun int
    tags string
    createTime DateTime
    modifyTime DateTime
    createPerson string
    modifyPerson string
}
```


### 标签信息表
```typescript
class lct_tag_info {
    tagID string
    tagName string
    tagType string    // p0 / p1 / p2
    parentID string
    isEnable int 
    remark string
    createTime DateTime
    modifyTime DateTime
    createPerson string
    modifyPerson string
}
```


### 工作流信息表
```typescript
class tag {
    tagName string
    tagID string
}

class WFNodeConfig {
    retry int
    timeout string
}

class ExtractItem {
    fieldName string
    fieldValue string | Object | number | Array<any> | boolean
}

class WFNode {
    apiId string
    config  WFNodeConfig
    extractList Array<ExtractItem>
    dependencyList Array<string>
    expectList Array<string>
}

class lct_workflow_info {
    workflowID string 
    workflowName string
    refDataID string
    tags Array<tag>
    nodes Array<WFNode>
    createTime DateTime | string
    modifyTime DateTime | string
    createPerson string
    modifyPerson string
}
```

### 预期断言信息表
```typescript
class Items {
    description string       // 断言描述
    fieldName string        // 断言的字段
    operation string        // 操作符 > | < | = | >= | <=
    desireValue string | number | boolean    // 预期结果
}

class lct_expect_info {
    expectID string
    apiID string
    expectType string
    expectItems Array<Items>
    createTime DateTime | string
    modifyTime DateTime | string
    createPerson string
    modifyPerson string
}
```


### 依赖信息表
```typescript
class lct_dependency {
    dependID string
    apiID string
    workflowID string
    dependItems Array<ExtractItem>
    createTime DateTime | string
    modifyTime DateTime | string
    createPerson string
    modifyPerson string
}
```

### 配置信息表
```typescript
class ConfigItem {
    description string
    configName string
    configValue string    
}

class lct_config {
    configID string
    configType string
    configItems Array<ConfigItem>
    createTime DateTime | string
    modifyTime DateTime | string
    createPerson string
    modifyPerson string
}
```

### 测试数据表
```typescript
class lct_data {
    dataID string
    workflowID string
    items Array<Map<any,any>>
    isEnable int
    createTime DateTime | string
    modifyTime DateTime | string
    createPerson string
    modifyPerson string
}
```
### 工作流数据规则表
```typescript
class Condition {
    description string
    // 按长度生成字符串；
    // 根据枚举生成；
    // 从基础数据中获取
    condType string
    rangeLength? string
    dataType? Array<string>
    enumData? Array<string>
    fetch? string
}

class FieldRule {
    fieldName string
    fieldType string  // url, body
    rules Array<Condition>W
}

class RuleItem {
    apiID string
    fieldRules Array<FieldRule>
}

class lct_data_rule {
    ruleID string
    workflowID string
    ruleItems Array<RuleItem>
    createTime DateTime | string
    modifyTime DateTime | string
    createPerson string
    modifyPerson string
}
```
