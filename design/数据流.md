# 数据流设计


## 同步openapi, swagger的接口信息
- 解析openapi,swagger接口格式
    - url,header,method,body,query,tags,descption写入到`lct_api_meta`,产生一条api记录
    - todo
## 工作流配置
- 工作流配置数据
```yaml
# 接口自动化工作流描述文件
workflowName: 工作流名称(场景名称)
owner: 创建人
tags: 业务线1,模块1
data: 关联的的数据id
type: workflow
wfNodes:
- apiName: 节点名称
  apiId: 接口ID
  config:
    retry: 5
    timeout: 5000
  expect:
  - fieldName: 要断言的字段
    desireValue: 预期结果
    operation: 操作(include,equal,lt,gt,let,gte,noeqlual)
  dependency:
    # 需要用到哪个工作流的哪个节点的数据
  - nodeName: flow1.api1
    # 节点extract的字段名称
    extractName: token_type
    fieldName: type=external时指定，测试数据里面的字段，可以嵌套
    dataSourceType:  external / currentWF / runtimeWF
    inject:
      part: header / body / url
      location: Authorization / registInfo.reportno / taskId
  extract:
  - name: 111
    value: 111
- apiName: apiName
  apiId: "https"
  config:
    retry: 5
    timeout: 5000
  dependency:
  extract:
```

- 解析工作流配置文件，往`lct_workflow_info`表中添加一条记录，并向`lct_workflow_dependency`,`lct_workflow_expect`添加新增记录关联workflow_info
```json
{

}
```

## 数据生成规则配置

## 生成工作流和测试数据

## 创建一条测试任务

## 执行测试任务